<h1>Welcome to ShareSpace!</h1>
<div class = "landing-tagline">
  <p>Rent budget-friendly storage nearby or turn your empty closet into cash!</p>
</div>

{{!-- <div class = "landing " --}}

<br><br>

<div class="landing-grid-container">

<div>
<div id ="map"></div>
{{!-- <script src="https://maps.googleapis.com/maps/api/js"></script> --}}
<script type="module">

    if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(function(position) {
            var pos = {
              lat: position.coords.latitude,
              lng: position.coords.longitude
            };
            var map = new google.maps.Map(document.getElementById('map'), {
              zoom: 12,
              center: pos
            });
            
            var markerCurrent = new google.maps.Marker({
      position: pos,
      map: map,
      icon: "public/list_icon2.png"
    });
  
  var markerPositions = []
  
  let lat = null
  let longs = null
    {{#each listings}}
         lat = {{this.latitude }}
         longs = {{ this.longitude }} 
        markerPositions.push ({position : {lat : lat, lng: longs} });

    {{/each}}


  // Loop through the markerPositions array and create a marker for each set of coordinates
  for (var i = 0; i < markerPositions.length; i++) {
    var marker = new google.maps.Marker({
      position: markerPositions[i].position,
      map: map,
      icon: markerPositions[i].icon,
      animation : google.maps.Animation.DROP

    });
  }    
   }, function() {
            handleLocationError(true, infoWindow, map.getCenter());
          });
        } else {
          handleLocationError(false, infoWindow, map.getCenter());
        }
      

      function handleLocationError(browserHasGeolocation, infoWindow, pos) {
        var errorDiv = document.createElement('div');
        errorDiv.innerHTML = "Error: The Geolocation service failed. Your browser doesn't support geolocation.";
        document.body.appendChild(errorDiv);
      }
</script>
</div>  

<div>
    <h2 class="landing-message">{{message}}</h2>
    <h2 class="landing-message"><a href="/homepage">Click here to view all Listings!</a></h2>

<div class = "landing-container">
  <br><br><br><br><br><br><br><br>
<h3 class="landing-message"> Already a user? <a class ="login-signup" href="/login">Login</a></h2> 
<h3 class="landing-message"> Here for the first time? <a class ="login-signup" href="/register">Register</a></h2>
</div>

</div>

</div>

{{!-- <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD9w7c6s9zaAOX2G2veo-nrwNZ0zZMCkHY&callback=initMap"> --}}
